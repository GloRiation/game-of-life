<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="common-style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css
    "
    />
    <style>
      .details img {
        height: 100%;
        width: 100%;
      }
      #patternList img {
        height: 100px;
        width: 100px;
      }
      #pattern-details .empty-message {
        display: none;
      }
      #pattern-details.empty .empty-message {
        display: initial;
      }
      .pattern-name {
        text-transform: uppercase;
      }
      #pattern-details.empty .details {
        display: none;
      }
      #pattern-details h2 {
        color: blue;
      }
      .pattern-description {
        padding-top: 20px;
        font-size: 12px;
      }
    </style>
    <title>Common Pattern</title>
  </head>
  <body>
    <div id="nav-menu"></div>

    <div class="row">
      <div class="col-8">
        <h1>Pattern</h1>
        <div class="input-group">
          <div class="input-group-text">Pattern Name</div>
          <input
            id="searchText"
            class="form-control"
            placeholder="Search ..."
            oninput="search()"
          />
        </div>
        <div id="patternList">
          <button
            class="pattern-item col-6 col-md-3 mb-4"
            title="click to show more details"
          >
            <img src="./assets/default.png" alt="default" />
            <div class="pattern-name">default</div>
          </button>
        </div>
      </div>
      <div class="col-4">
        <h1>Pattern Detail</h1>
        <div class="card">
          <div id="pattern-details" class="card-body p-3 empty">
            <div class="empty-message">Click a pattern to show details</div>
            <div class="details">
              <h2 class="pattern-name">xxx</h2>
              <img src="xxx" alt="img" class="pattern-logo" />
              <br />
              <span>type:</span> <span class="pattern-type"></span>

              <div class="pattern-description">
                Lorem ipsum dolor sit amet consectetur adipisicing elit.
                Officiis eveniet neque earum non labore, deleniti quidem, minus
                doloribus, totam distinctio aspernatur similique harum soluta
                cupiditate maiores deserunt veniam fuga aperiam!
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let allPatterns = [
        { name: "default", src: "./assets/default.png", type: "default" },
        {
          name: "blinker",
          src: "./assets/Game_of_life_blinker.gif",
          type: "oscillator",
        },
        {
          name: "glider",
          src: "./assets/Game_of_life_animated_glider.gif",
          type: "spaceship",
        },
        {
          name: "loaf",
          src: "./assets/196px-Game_of_life_loaf.svg.png",
          type: "still life",
        },
        {
          name: "block",
          src: "./assets/132px-Game_of_life_block_with_border.svg.png",
          type: "still life",
        },
        {
          name: "toad",
          src: "./assets/Game_of_life_toad.gif",
          type: "spaceship",
        },
        {
          name: "bee-hive",
          src: "./assets/196px-Game_of_life_beehive.svg.png",
          type: "Still life",
        },
        {
          name: "flower",
          src: "./assets/Game_of_life_flower.svg.png",
          type: "Still life",
        },
        {
          name: "beacon",
          src: "./assets/Game_of_life_beacon.gif",
          type: "oscillator",
        },
        {
          name: "pulsar",
          src: "./assets/Game_of_life_pulsar.gif",
          type: "oscillator",
        },
        {
          name: "penta-decathlon",
          src: "./assets/I-Column.gif",
          type: "oscillator",
        },
        {
          name: "LWSS",
          src: "./assets/Game_of_life_animated_LWSS.gif",
          type: "oscillator",
        },
        {
          name: "MWSS",
          src: "./assets/Animated_Mwss.gif",
          type: "oscillator",
        },
        {
          name: "HWSS",
          src: "./assets/Animated_Hwss.gif",
          type: "oscillator",
        },
      ];
      let patternTemplate = patternList.firstElementChild;
      patternTemplate.remove();
      /* shows all pattern on the list*/
      showMatchedPattern();
      /* search function*/
      function showMatchedPattern() {
        console.log(searchText.value);
        let matchedPatterns = allPatterns.filter((pattern) => {
          return pattern.name.includes(searchText.value);
        });
        for (let i = 0; i < matchedPatterns.length; i++) {
          let pattern = matchedPatterns[i];
          let patternNode = patternTemplate.cloneNode(true);
          // console.log(patternNode);
          patternNode.querySelector(".pattern-name").innerHTML = pattern.name;
          let img = patternNode.querySelector("img");
          img.src = pattern.src;
          patternList.appendChild(patternNode);
          patternNode.addEventListener("mouseover", () => {
            showPatternDetails(pattern);
          });
        }
      }
      function showPatternDetails(pattern) {
        console.log(pattern.type);
        document.querySelector("#pattern-details").classList.remove("empty");
        document.querySelector("#pattern-details .pattern-name").textContent =
          pattern.name;
        document.querySelector("#pattern-details .pattern-logo").src =
          pattern.src;
        document.querySelector(".pattern-type").textContent = pattern.type;
        console.log("hovered");
      }
      function search() {
        patternList.textContent = "";
        showMatchedPattern();
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js
    "></script>
    <script src="request-navbar.js"></script>
  </body>
</html>
